const http = require('http');
const fs = require('fs');
const path = require('path');

const server = http.createServer((req, res) => {
    let filePath = '';

    // Redirect root URL to /my-site
    if (req.url === '/') {
        res.writeHead(302, {'Location': '/my-site'});
        res.end();
        return;
    }

    // Serve HTML files
    if (req.url.endsWith('.html')) {
        switch (req.url) {
            case '/my-site':
                filePath = path.join(__dirname, 'index.html');
                break;
            case '/research-and-publication':
                filePath = path.join(__dirname, 'research-and-publication.html');
                break;
            default:
                res.writeHead(404, {'Content-Type': 'text/html'});
                res.end('<h1>404 Not Found</h1>');
                return;
        }
    }

    // Serve JavaScript files
    if (req.url.endsWith('.js')) {
        filePath = path.join(__dirname, req.url);
    }

    // Read and serve file
    fs.readFile(filePath, (err, data) => {
        if (err) {
            res.writeHead(500, {'Content-Type': 'text/html'});
            res.end('<h1>500 Internal Server Error</h1>');
        } else {
            // Determine content type
            let contentType = 'text/html';
            if (req.url.endsWith('.js')) {
                contentType = 'text/javascript';
            }
            res.writeHead(200, {'Content-Type': contentType});
            res.end(data);
        }
    });
});

const PORT = process.env.PORT || 3000;
server.listen(PORT, () => {
    console.log(`Server is running on port ${PORT}`);
});

